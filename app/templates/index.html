{% extends "base.html" %}

{% block title %}AccessONIX - ONIX Generator for Accessible EPUBs{% endblock %}

{% block content %}
<div class="container three-column-layout">
    <p class="process-description">By merging data extracted from an accessible EPUB file with data from the print ONIX record for the title, the process generates a "remediated" ONIX 3.0 record meeting Editeur standards.</p>
    
    <form id="onixForm" method="POST" action="{{ url_for('process') }}" enctype="multipart/form-data">
        <!-- Column 1: File Upload -->
        <div class="column">
            <div class="form-section">
                <h2>File Upload</h2>
                <div class="form-group">
                    <label for="epub_file">Upload Accessible EPUB:</label>
                    <input type="file" id="epub_file" name="epub_file" accept=".epub" required>
                </div>

                <div class="form-group">
                    <label for="onix_file">Upload ONIX XML:</label>
                    <input type="file" id="onix_file" name="onix_file" accept=".xml" required>
                </div>

                <div class="form-group">
                    <label for="epub_isbn">EPUB ISBN (13 digits):</label>
                    <input type="text" id="epub_isbn" name="epub_isbn" pattern="\d{13}" required>
                </div>
                
                <div class="help-text">
                    <p>More words about the need...</p>
                </div>
            </div>
        </div>

        <!-- Column 2: Output Selection -->
        <div class="column">
            <div class="form-section">
                <h2>Output Selection</h2>
                <div class="form-group">
                    <label for="output">Select Output:</label>
                    <select id="output" name="role" required>
                        <option value="basic">Basic</option>
                        <option value="enhanced">Enhanced</option>
                    </select>
                </div>
                <p class="output-description">
                    Choose "Enhanced" to create a record which includes sender and pricing information.<br>
                    Choose "Basic" to create a record without this detail.
                </p>
                <div class="help-text">
                    <p>Possibly include this?</p>
                </div>
            </div>
        </div>

        <!-- Column 3: Enhanced Information -->
        <div class="column">
            <div id="publisher-fields" class="form-section" style="display: none;">
                <h2>Enhanced Information</h2>
                <!-- [Previous enhanced fields remain the same] -->
            </div>
        </div>

        <!-- Bottom section with buttons -->
        <div class="form-actions">
            <button type="submit" class="btn btn-primary">Generate ONIX</button>
            <button type="button" class="btn btn-secondary" onclick="window.location.href='{{ url_for('help') }}'">Help</button>
            <button type="button" class="btn btn-secondary" onclick="window.location.href='https://chic-cascaron-db5ad2.netlify.app'">Validator</button>
        </div>
    </form>

    <div class="validation-info">
        <h2>ONIX Validator</h2>
        <p>The record created here will pass validation against the ONIX Standard at:<br>
        https://www.editeur.org/93/Release-3.0-Downloads</p>
    </div>
</div>
{% endblock %}